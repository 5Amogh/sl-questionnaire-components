!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("ng2-semantic-ui-v9"),require("lodash-es")):"function"==typeof define&&define.amd?define("sl-questionnaire",["exports","@angular/common","@angular/core","@angular/forms","ng2-semantic-ui-v9","lodash-es"],t):t((e=e||self)["sl-questionnaire"]={},e.ng.common,e.ng.core,e.ng.forms,e.ng2SemanticUiV9,e.lodashEs)}(this,(function(exports,common,core,forms,ng2SemanticUiV9,lodashEs){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __rest(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}function __decorate(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}function __param(e,t){return function(n,o){t(n,o,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{u(o.next(e))}catch(e){r(e)}}function a(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))}function __generator(e,t){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function __createBinding(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}function __exportStar(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=n.apply(e,t||[]),r=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(e){i[e]&&(o[e]=function(t){return new Promise((function(n,o){r.push([e,t,n,o])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof __await?Promise.resolve(n.value.v).then(u,l):c(r[0][2],n)}catch(e){c(r[0][3],e)}var n}function u(e){a("next",e)}function l(e){a("throw",e)}function c(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}}function __asyncDelegator(e){var t,n;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,i){t[o]=e[o]?function(t){return(n=!n)?{value:__await(e[o](t)),done:"return"===o}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,i){(function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)})(o,i,(t=e[n](t)).done,t.value)}))}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function __classPrivateFieldSet(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}var SlTranslateService=function(){function e(){}return e.ɵprov=core.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=__decorate([core.Injectable({providedIn:"root"})],e)}(),ResponseType;ResponseType=exports.ResponseType||(exports.ResponseType={}),ResponseType.TEXT="text",ResponseType.NUMBER="number",ResponseType.RADIO="radio",ResponseType.MULTISELECT="multiselect",ResponseType.DATE="date",ResponseType.SLIDER="slider",ResponseType.PAGEQUESTIONS="pageQuestions",ResponseType.MATRIX="matrix";var SlQuestionnaireService=function(){function e(){var e=this;this.validate=function(t){return function(n){if("string"==typeof t.validation)return null;if(!t.validation.required)return null;if(t.validation.regex)return e.testRegex(t.validation.regex,n.value)?null:{err:"Invalid character found"};if(t.validation.IsNumber)return n.value?!isNaN(n.value)?null:{err:"Only numbers allowed"}:{err:"Number not entered"};if(t.validation.required){if(!n.value)return{err:"Required field"};if(t.responseType==exports.ResponseType.MULTISELECT)return n.value.some((function(e){return""!=e}))?null:{err:"Select at least one option"};if(t.responseType==exports.ResponseType.SLIDER){var o=t.validation.min,i=t.validation.max;return o<=n.value&&n.value<=i?null:{err:"Selected value  not within range"}}}}}}return e.prototype.testRegex=function(e,t){return new RegExp(e).test(t)},e.prototype.setSubmissionId=function(e){this._submissionId=e},e.prototype.getSubmissionId=function(){return this._submissionId},e.prototype.mapSubmissionToAssessment=function(e){var t,n,o,i,r,s,a,u,l=e.assessment;try{for(var c=__values(l.evidences),p=c.next();!p.done;p=c.next()){var d=p.value,m=l.submissions[d.externalId];if(m){if(d.notApplicable=m.notApplicable,d.notApplicable)continue;try{for(var f=(o=void 0,__values(d.sections)),v=f.next();!v.done;v=f.next()){var h=v.value;try{for(var b=(r=void 0,__values(h.questions)),y=b.next();!y.done;y=b.next()){var _=y.value;if("pageQuestions"===_.responseType)try{for(var g=(a=void 0,__values(_.pageQuestions)),x=g.next();!x.done;x=g.next()){var q=x.value;q.value="matrix"!==q.responseType?m.answers[q._id].value:this.constructMatrixValue(m,q,d.externalId),q.remarks=m.answers[q._id]?m.answers[q._id].remarks:"",q.fileName=m.answers[q._id]?m.answers[q._id].fileName:[]}}catch(e){a={error:e}}finally{try{x&&!x.done&&(u=g.return)&&u.call(g)}finally{if(a)throw a.error}}else m.answers&&m.answers[_._id]&&(_.value="matrix"!==_.responseType?m.answers[_._id].value:this.constructMatrixValue(m,_,d.externalId),_.remarks=m.answers[_._id]?m.answers[_._id].remarks:"",_.fileName=m.answers[_._id]?m.answers[_._id].fileName:[])}}catch(e){r={error:e}}finally{try{y&&!y.done&&(s=b.return)&&s.call(b)}finally{if(r)throw r.error}}}}catch(e){o={error:e}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}}}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return this.setSubmissionId(l.submissionId),e},e.prototype.constructMatrixValue=function(e,t,n){var o,i;if(t.value=[],e.answers&&e.answers[t._id]&&e.answers[t._id].value){try{for(var r=__values(e.answers[t._id].value),s=r.next();!s.done;s=r.next()){s.value;t.value.push(JSON.parse(JSON.stringify(t.instanceQuestions)))}}catch(e){o={error:e}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return t.value.forEach((function(n,o){n.forEach((function(n,i){e.answers[t._id]&&e.answers[t._id].value[o][n._id]&&(n.value=e.answers[t._id].value[o][n._id].value,n.remarks=e.answers[t._id].value[o][n._id].remarks,n.fileName=e.answers[t._id].value[o][n._id].fileName)}))})),t.value}return[]},e.prototype.getEvidenceData=function(e,t){var n=e.sections,o=this.getSectionData(n,t);return{externalId:e.externalId,answers:o,startTime:e.startTime,endTime:Date.now()}},e.prototype.getSectionData=function(e,t){for(var n={},o=0;o<e.length;o++)n=__assign(__assign({},n),this.createpayload(e[o].questions,t));return n},e.prototype.createpayload=function(e,t){for(var n={},o=0;o<e.length;o++){var i=e[o];if("pageQuestions"!=i.responseType){if("matrix"==i.responseType)for(var r=0;r<i.value.length;r++)t[i._id][r]=this.createpayload(i.value[r],t[i._id][r]);var s=this.formatToPayload(i,t);n[i._id]=s}else n=__assign(__assign({},n),this.createpayload(i.pageQuestions,t))}return n},e.prototype.formatToPayload=function(e,t){var n="matrix"!=e.responseType?e.value:t[e._id];return{qid:e._id,value:n,remarks:e.remarks,fileName:e.fileName,gpsLocation:"",payload:{question:e.question,labels:t[e._id],responseType:e.responseType,filesNotUploaded:[]},startTime:e.startTime,endTime:e.endTime,criteriaId:e.payload.criteriaId,responseType:e.responseType,evidenceMethod:e.evidenceMethod,rubricLevel:""}},e.ɵprov=core.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=__decorate([core.Injectable({providedIn:"root"})],e)}(),TextInputComponent=function(){function e(e,t){this.qService=e,this.translate=t}return e.prototype.ngOnInit=function(){var e=this;this.placeholder=this.translate.frmelmnts.lbl.enterResponse,setTimeout((function(){e.questionnaireForm.addControl(e.question._id,new forms.FormControl(e.question.value||null,[e.qService.validate(e.question)])),e.question.startTime=e.question.startTime?e.question.startTime:Date.now()}))},Object.defineProperty(e.prototype,"isValid",{get:function(){return this.questionnaireForm.controls[this.question._id].valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTouched",{get:function(){return this.questionnaireForm.controls[this.question._id].touched},enumerable:!0,configurable:!0}),e.prototype.onChange=function(e){var t=e.target.value;this.question.value=t,this.question.endTime=Date.now()},e.ctorParameters=function(){return[{type:SlQuestionnaireService},{type:SlTranslateService}]},__decorate([core.Input()],e.prototype,"questionnaireForm",void 0),__decorate([core.Input()],e.prototype,"question",void 0),e=__decorate([core.Component({selector:"sl-text-input",template:'<div\n  [formGroup]="questionnaireForm"\n  *ngIf="questionnaireForm?.contains(question._id)"\n>\n  <input\n    type="text"\n    [formControlName]="question?._id"\n    [ngClass]="!isValid && isTouched ? \'is-invalid \' : \'is-valid\'"\n    class="sb-form-control"\n    [placeholder]="placeholder"\n    (change)="onChange($event)"\n    [value]="question.value"\n  />\n</div>\n',styles:[""]})],e)}(),DateInputComponent=function(){function e(e,t){this.qService=e,this.translate=t}return e.prototype.ngOnInit=function(){var e,t=this;this.autoCaptureText=null===(e=this.translate.frmelmnts.btn)||void 0===e?void 0:e.autoCapture,setTimeout((function(){t.questionnaireForm.addControl(t.question._id,new forms.FormControl(t.question.value?new Date(t.question.value):null,[t.qService.validate(t.question)])),t.question.startTime=t.question.startTime?t.question.startTime:Date.now()})),this.min=this.question.validation.min?new Date(this.question.validation.min):null,this.max=this.question.validation.max?new Date(this.question.validation.max):null},e.prototype.onChange=function(e){var t=e;this.question.value=t,this.question.endTime=Date.now()},e.prototype.autoCapture=function(){this.questionnaireForm.controls[this.question._id].patchValue(new Date(Date.now()))},e.ctorParameters=function(){return[{type:SlQuestionnaireService},{type:SlTranslateService}]},__decorate([core.Input()],e.prototype,"questionnaireForm",void 0),__decorate([core.Input()],e.prototype,"question",void 0),__decorate([core.Input()],e.prototype,"autoCaptureText",void 0),e=__decorate([core.Component({selector:"sl-date-input",template:'<div\n  [formGroup]="questionnaireForm"\n  *ngIf="questionnaireForm?.contains(question._id)"\n  class="d-flex flex-ai-center flex-jc-space-between"\n>\n  <div class="ui left icon input">\n    <i class="calendar icon"></i>\n    <input\n      suiDatepicker\n      [pickerMode]="\'date\'"\n      [pickerUseNativeOnMobile]="false"\n      [formControlName]="question?._id"\n      (pickerSelectedDateChange)="onChange($event)"\n      class="question-date-input"\n      [pickerMinDate]="min"\n      [pickerMaxDate]="max"\n    />\n  </div>\n  <div *ngIf="question?.autoCapture && !question?.value">\n    <button class="sb-btn sb-btn-normal sb-btn-primary" (click)="autoCapture()">\n\t\t{{autoCaptureText}}\n    </button>\n  </div>\n</div>\n',styles:[""]})],e)}(),NumberInputComponent=function(){function e(e,t){this.qService=e,this.translate=t}return e.prototype.ngOnInit=function(){var e,t,n=this;this.placeholder=null===(t=null===(e=this.translate.frmelmnts)||void 0===e?void 0:e.lbl)||void 0===t?void 0:t.enterResponse,setTimeout((function(){n.questionnaireForm.addControl(n.question._id,new forms.FormControl(n.question.value||null,[n.qService.validate(n.question)])),n.question.startTime=n.question.startTime?n.question.startTime:Date.now()}))},e.prototype.onChange=function(e){var t=e.target.value;this.question.value=t,this.question.endTime=Date.now()},Object.defineProperty(e.prototype,"isValid",{get:function(){return this.questionnaireForm.controls[this.question._id].valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTouched",{get:function(){return this.questionnaireForm.controls[this.question._id].touched},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:SlQuestionnaireService},{type:SlTranslateService}]},__decorate([core.Input()],e.prototype,"questionnaireForm",void 0),__decorate([core.Input()],e.prototype,"question",void 0),e=__decorate([core.Component({selector:"sl-number-input",template:'<div\n  [formGroup]="questionnaireForm"\n  *ngIf="questionnaireForm?.contains(question._id)"\n>\n  <input\n    type="number"\n    [formControlName]="question?._id"\n    class="sb-form-control"\n    [placeholder]="placeholder"\n    (change)="onChange($event)"\n    [value]="question.value"\n  />\n</div>\n',styles:[""]})],e)}(),RangeInputComponent=function(){function e(e){this.qService=e}return e.prototype.ngOnInit=function(){var e=this;setTimeout((function(){e.questionnaireForm.addControl(e.question._id,new forms.FormControl(e.question.value||null,[e.qService.validate(e.question)])),e.question.startTime=e.question.startTime?e.question.startTime:Date.now()}))},e.prototype.onChange=function(e){var t=e.target.value;this.question.value=t,this.question.endTime=Date.now()},Object.defineProperty(e.prototype,"isValid",{get:function(){return this.questionnaireForm.controls[this.question._id].valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTouched",{get:function(){return this.questionnaireForm.controls[this.question._id].touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return"string"==typeof this.question.validation?null:this.question.validation.min},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return"string"==typeof this.question.validation?null:this.question.validation.max},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:SlQuestionnaireService}]},__decorate([core.Input()],e.prototype,"questionnaireForm",void 0),__decorate([core.Input()],e.prototype,"question",void 0),e=__decorate([core.Component({selector:"sl-range-input",template:'<div\n  class="\n    d-flex\n    flex-ai-center flex-dc\n    mt-30\n    ng-dirty ng-invalid ng-touched\n    range-wrap\n  "\n  [formGroup]="questionnaireForm"\n  *ngIf="questionnaireForm?.contains(question._id)"\n>\n  <div class="range-value" id="rangeV">{{ this.question.value }}</div>\n\n  <input\n    id="range"\n    type="range"\n    [min]="min"\n    [max]="max"\n    [ngClass]="isValid && isTouched ? \'is-invalid\' : \'is-valid\'"\n    step="1"\n    [formControlName]="question?._id"\n    class="w-100"\n    (change)="onChange($event)"\n    [value]="question.value"\n  />\n</div>\n',styles:[".range-value{width:50px;height:50px;line-height:50px;border-radius:50%;font-size:20px;color:#0274fd;text-align:center;background:#e9e8d9;margin-bottom:17px}input[type=range]{height:34px;-webkit-appearance:none;margin:10px 0;width:100%}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{width:100%;height:11px;cursor:pointer;animate:.2s;box-shadow:1px 1px 1px #000;background:#74a9d8;border-radius:1px;border:0 solid #010101}input[type=range]::-webkit-slider-thumb{box-shadow:1px 1px 1px #000031;border:1px solid #00001e;height:26px;width:26px;border-radius:15px;background:#fff;cursor:pointer;-webkit-appearance:none;margin-top:-8px}input[type=range]:focus::-webkit-slider-runnable-track{background:#74a9d8}input[type=range]::-moz-range-track{width:100%;height:11px;cursor:pointer;animate:.2s;box-shadow:1px 1px 1px #000;background:#74a9d8;border-radius:1px;border:0 solid #010101}input[type=range]::-moz-range-thumb{box-shadow:1px 1px 1px #000031;border:1px solid #00001e;height:26px;width:26px;border-radius:15px;background:#fff;cursor:pointer}input[type=range]::-ms-track{width:100%;height:11px;cursor:pointer;animate:.2s;background:0 0;border-color:transparent;color:transparent}input[type=range]::-ms-fill-lower{background:#74a9d8;border:0 solid #010101;border-radius:2px;box-shadow:1px 1px 1px #000}input[type=range]::-ms-fill-upper{background:#74a9d8;border:0 solid #010101;border-radius:2px;box-shadow:1px 1px 1px #000}input[type=range]::-ms-thumb{margin-top:1px;box-shadow:1px 1px 1px #000031;border:1px solid #00001e;height:26px;width:26px;border-radius:15px;background:#fff;cursor:pointer}input[type=range]:focus::-ms-fill-lower{background:#74a9d8}input[type=range]:focus::-ms-fill-upper{background:#74a9d8}"]})],e)}(),RadioInputComponent=function(){function e(e,t){this.qService=e,this.translate=t,this.dependentParent=new core.EventEmitter}return e.prototype.ngOnInit=function(){var e,t=this;this.hintCloseText=null===(e=this.translate.frmelmnts.btn)||void 0===e?void 0:e.close,setTimeout((function(){t.questionnaireForm.addControl(t.question._id,new forms.FormControl(t.question.value||null,t.qService.validate(t.question))),t.question.startTime=t.question.startTime?t.question.startTime:Date.now(),t.question.value&&t.question.children.length&&t.dependentParent.emit(t.question)}))},Object.defineProperty(e.prototype,"isValid",{get:function(){return this.questionnaireForm.controls[this.question._id].valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTouched",{get:function(){return this.questionnaireForm.controls[this.question._id].touched},enumerable:!0,configurable:!0}),e.prototype.onChange=function(e){this.questionnaireForm.controls[this.question._id].setValue(e),this.question.value=e,this.question.endTime=Date.now(),this.question.children.length&&this.dependentParent.emit(this.question)},e.ctorParameters=function(){return[{type:SlQuestionnaireService},{type:SlTranslateService}]},__decorate([core.Input()],e.prototype,"options",void 0),__decorate([core.Input()],e.prototype,"questionnaireForm",void 0),__decorate([core.Input()],e.prototype,"question",void 0),__decorate([core.Output()],e.prototype,"dependentParent",void 0),e=__decorate([core.Component({selector:"sl-radio-input",template:'<div *ngIf="questionnaireForm?.contains(question._id)">\n  <div\n    *ngFor="let o of options; let optionIndex = index"\n    [formGroup]="questionnaireForm"\n    class="\n      mb-15\n      sb-radio-btn-checkbox sb-radio-btn-primary\n      d-flex\n      flex-ai-baseline\n    "\n  >\n    <input\n      type="radio"\n      (change)="onChange(o.value)"\n      [name]="question._id"\n      [ngClass]="isValid && isTouched ? \'is-invalid\' : \'is-valid\'"\n      [value]="o.value"\n      [formControlName]="question._id"\n    />\n    <label>{{ o.label }}</label>\n    <div *ngIf="question?.option && question?.option[optionIndex]?.hint">\n      <i\n        class="icon large lightbulb"\n        (click)="\n          isDimmed = !isDimmed; hint = question?.option[optionIndex]?.hint\n        "\n      ></i>\n    </div>\n  </div>\n</div>\n\n<sui-dimmer [(isDimmed)]="isDimmed" [isClickable]="true">\n  <h4 class="ui inverted header">{{ hint }}</h4>\n  <button\n    type="button"\n    class="sb-btn sb-btn-sm sb-btn-white text-uppercase flex-basis-1"\n    type="submit"\n  >\n    {{ hintCloseText}}\n  </button>\n</sui-dimmer>\n',styles:[""]})],e)}(),CheckboxInputComponent=function(){function e(e,t){this.qService=e,this.translate=t,this.dependentParent=new core.EventEmitter}return e.prototype.ngOnInit=function(){var e,t=this;this.hintCloseText=null===(e=this.translate.frmelmnts.btn)||void 0===e?void 0:e.close,setTimeout((function(){var e=t.options.map((function(e){return t.question.value&&t.question.value.find((function(t){return t==e.value}))?new forms.FormControl(e.value):new forms.FormControl("")}));t.questionnaireForm.addControl(t.question._id,new forms.FormArray(e,t.qService.validate(t.question))),t.question.startTime=t.question.startTime?t.question.startTime:Date.now(),t.question.value.length&&t.question.children.length&&t.dependentParent.emit(t.question)}))},e.prototype.onChange=function(e,t,n){var o=this.questionnaireForm.get(this.question._id);t&&o.controls[n].patchValue(e),this.question.value=this.questionnaireForm.controls[this.question._id].value,this.question.value=this.question.value.filter(Boolean),this.question.endTime=Date.now(),this.question.children.length&&this.dependentParent.emit(this.question)},Object.defineProperty(e.prototype,"isValid",{get:function(){return this.questionnaireForm.controls[this.question._id].valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTouched",{get:function(){return this.questionnaireForm.controls[this.question._id].touched},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:SlQuestionnaireService},{type:SlTranslateService}]},__decorate([core.Input()],e.prototype,"options",void 0),__decorate([core.Input()],e.prototype,"questionnaireForm",void 0),__decorate([core.Input()],e.prototype,"question",void 0),__decorate([core.Output()],e.prototype,"dependentParent",void 0),e=__decorate([core.Component({selector:"sl-checkbox-input",template:'<div *ngIf="questionnaireForm?.contains(question._id)">\n  <div\n    *ngFor="let o of options; let i = index"\n    [formGroup]="questionnaireForm"\n    class="mb-15 sb-checkbox sb-checkbox-secondary d-flex flex-ai-baseline"\n  >\n    <div [formArrayName]="question._id">\n      <sui-checkbox\n        (checkChange)="onChange(o.value, $event, i)"\n        [formControlName]="i"\n      >\n        {{ o.label }}\n      </sui-checkbox>\n    </div>\n    <div *ngIf="question?.option && question?.option[i]?.hint">\n      <i\n        class="icon large lightbulb"\n        (click)="isDimmed = !isDimmed; hint = question?.option[i]?.hint"\n      ></i>\n    </div>\n  </div>\n</div>\n\n<sui-dimmer [(isDimmed)]="isDimmed" [isClickable]="true">\n  <h4 class="ui inverted header">{{ hint }}</h4>\n  <button\n    type="button"\n    class="sb-btn sb-btn-sm sb-btn-white text-uppercase flex-basis-1"\n    type="submit"\n  >\n    {{ hintCloseText }}\n  </button>\n</sui-dimmer>\n',styles:[""]})],e)}(),QuesRemarksComponent=function(){function e(e){this.translate=e,this.remark="",this.saveClicked=new core.EventEmitter}return e.prototype.ngOnInit=function(){var e;this.title=null===(e=this.translate.frmelmnts.lbl)||void 0===e?void 0:e.remark_title,this.remarksAddText=this.translate.frmelmnts.btn.add,this.remark=this.question.remarks,this.remark&&(this.showRemarks=!0)},e.prototype.saveRemark=function(){this.question.remarks=this.remark,this.saveClicked.emit({value:this.remark})},e.prototype.deleteRemark=function(){this.remark="",this.saveRemark(),this.showRemarks=!1},e.ctorParameters=function(){return[{type:SlTranslateService}]},__decorate([core.Output()],e.prototype,"saveClicked",void 0),__decorate([core.Input()],e.prototype,"question",void 0),e=__decorate([core.Component({selector:"sl-ques-remarks",template:'<div class="d-flex flex-ai-center flex-jc-space-between my-10">\n  <h5 class="my-10">{{ title }}</h5>\n  <button\n    class="sb-btn sb-btn-normal sb-btn-primary"\n    *ngIf="!remark.length"\n    (click)="showRemarks = true"\n  >\n    {{ remarksAddText }}\n  </button>\n  <span *ngIf="remark.length" (click)="deleteRemark()"\n    ><i class="trash large icon"></i\n  ></span>\n</div>\n\n<div class="d-flex flex-ai-end" *ngIf="showRemarks">\n  <textarea\n    rows="3"\n    class="w-100"\n    [(ngModel)]="remark"\n    (ngModelChange)="saveRemark()"\n  >\n  </textarea>\n</div>\n',styles:[""]})],e)}(),SlUtilsService=function(){function e(e){this.modalService=e}return e.prototype.alert=function(e){var t=[];e.acceptText&&t.push({type:"accept",returnValue:!0,buttonText:e.acceptText}),e.cancelText&&t.push({type:"cancel",returnValue:!1,buttonText:e.cancelText});var n={type:e.type,size:e.size,isClosed:e.closeIcon,content:{title:e.title,body:{type:e.bodyType,data:e.data}},footer:{className:e.buttonClass,buttons:t}};return this.openAlert(n)},e.ctorParameters=function(){return[{type:ng2SemanticUiV9.SuiModalService}]},e.ɵprov=core.ɵɵdefineInjectable({factory:function(){return new e(core.ɵɵinject(ng2SemanticUiV9.SuiModalService))},token:e,providedIn:"root"}),e=__decorate([core.Injectable({providedIn:"root"})],e)}(),AttachmentComponent=function(){function e(e,t){this.translate=e,this.utils=t}return e.prototype.ngOnInit=function(){},e.prototype.basicUpload=function(e){var t=this;+(e[0].size/1e3/1e3).toFixed(4)>20?this.fileLimitCross():(this.formData=new FormData,Array.from(e).forEach((function(e){return t.formData.append("file",e)})),this.preSignedUrl(this.getFileNames(this.formData)))},e.prototype.fileLimitCross=function(){var e={size:"tiny",bodyType:"text",data:this.translate.frmelmnts.alert.fileLimitCross20,buttonClass:"single-btn",acceptText:this.translate.frmelmnts.btn.ok,cancelText:null};this.utils.alert(e)},e.prototype.getFileNames=function(e){var t=[];return e.forEach((function(e){t.push(e.name)})),t},e.prototype.preSignedUrl=function(e){var t=this,n={ref:"survey",request:{}};n.request[this.data.submissionId]={files:e},this.utils.getPreSingedUrls(n).subscribe((function(e){var n=e.result[t.data.submissionId].files[0];t.formData.append("url",n.url),t.utils.cloudStorageUpload(t.formData).subscribe((function(e){var o,i;if(200===e.status){var r={name:t.getFileNames(t.formData)[0],url:n.url.split("?")[0]};try{for(var s=__values(Object.keys(n.payload)),a=s.next();!a.done;a=s.next()){var u=a.value;r[u]=n.payload[u]}}catch(e){o={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}t.data.files.push(r);var l={size:"tiny",bodyType:"text",data:t.translate.frmelmnts.alert.evidenceUploaded,buttonClass:"single-btn",acceptText:t.translate.frmelmnts.btn.ok,cancelText:null,type:"uploaded"};t.utils.alert(l)}else t.utils.error(t.translate.frmelmnts.message.unableToUpload)}),(function(e){t.utils.error(t.translate.frmelmnts.message.unableToUpload)}))}),(function(e){console.log(e)}))},e.prototype.extension=function(e){return e.split(".").pop()},e.prototype.openFile=function(e){window.open(e.url,"_blank")},e.prototype.deleteAttachment=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return t={size:"mini",bodyType:"text",data:this.translate.frmelmnts.alert.confirmEvidenceDelete,buttonClass:"double-btn",acceptText:this.translate.frmelmnts.btn.ok,cancelText:this.translate.frmelmnts.btn.no},[4,this.utils.alert(t)];case 1:return n.sent()?(this.data.files.splice(e,1),[2]):[2]}}))}))},e.prototype.onAddApproval=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(o){switch(o.label){case 0:return t="\n    "+this.translate.frmelmnts.alert.evidence_content_policy+"<a href='/term-of-use.html' target=\"_blank\">"+this.translate.frmelmnts.alert.evidence_content_policy_label+"</a> ."+this.translate.frmelmnts.alert.uploadevidencecontent+"\n    ",n={size:"tiny",bodyType:"checkbox",data:t,buttonClass:"double-btn",acceptText:this.translate.frmelmnts.btn.upload,cancelText:this.translate.frmelmnts.btn.donotupload},[4,this.utils.alert(n)];case 1:return o.sent()?(e.click(),[2]):(this.notAccepted(),[2])}}))}))},e.prototype.notAccepted=function(){var e={size:"tiny",bodyType:"text",data:this.translate.frmelmnts.alert.uploadTermsRejected,buttonClass:"single-btn",acceptText:this.translate.frmelmnts.btn.ok,cancelText:null,type:"notAccepted"};this.utils.alert(e)},e.ctorParameters=function(){return[{type:SlTranslateService},{type:SlUtilsService}]},__decorate([core.Input()],e.prototype,"data",void 0),e=__decorate([core.Component({selector:"sl-attachment",template:'<label for="file-upload" class="custom-file-upload"></label>\n<input\n  id="file-upload"\n  type="file"\n  #file\n  (change)="basicUpload($event.target.files)"\n/>\n<div class="d-flex">\n  <div class="bs-1 p-20" (click)="onAddApproval(file)">\n    <i class="plus icon"></i>\n  </div>\n  <div\n    *ngFor="let item of data.files; let i = index"\n    (click)="openFile(item)"\n    class="area"\n  >\n    <a\n      class="remove-image"\n      (click)="$event.stopPropagation(); deleteAttachment(i)"\n      >&#215;</a\n    >\n    <div *ngIf="extension(item.name) == \'png\'" class="mx-10">\n      <i class="file image outline icon"></i>\n    </div>\n    <div *ngIf="extension(item.name) == \'jpg\'" class="mx-10">\n      <i class="file image outline icon"></i>\n    </div>\n    <div *ngIf="extension(item.name) == \'jpeg\'" class="mx-10">\n      <i class="file image outline icon"></i>\n    </div>\n    <div *ngIf="extension(item.name) == \'pdf\'" class="mx-10">\n      <i class="file pdf outline icon"></i>\n    </div>\n  </div>\n</div>\n',styles:["input[type=file]{display:none}.area{position:relative}.area a{display:inline}.area i{font-size:40px}.remove-image{display:none;position:absolute;top:-10px;right:2px;border-radius:10em;padding:2px 6px 3px;text-decoration:none;background:#555;border:3px solid #fff;color:#fff!important;box-shadow:0 2px 6px rgba(0,0,0,.5),inset 0 2px 4px rgba(0,0,0,.3);text-shadow:0 1px 2px rgba(0,0,0,.5);transition:background .5s}.remove-image:hover{background:#e54e4e;padding:3px 7px 5px;top:-11px;right:2px}.remove-image:active{background:#e54e4e;top:-10px;right:2px}.bs-1{background-color:grey}"]})],e)}(),InputComponent=function(){function InputComponent(e,t){this.translate=e,this.qService=t,this.dimmerCloseText=this.translate.frmelmnts.btn.close}return Object.defineProperty(InputComponent.prototype,"reponseType",{get:function(){return exports.ResponseType},enumerable:!0,configurable:!0}),InputComponent.prototype.toggleQuestion=function(e){var t=this,n=e.children;this.questions.map((function(e,o){if(n.includes(e._id)){var i=t.questions[o];i.canDisplay=t.canDisplayChildQ(i,o),0==i.canDisplay&&(i.value="",t.questionnaireForm.removeControl(i._id))}}))},InputComponent.prototype.canDisplayChildQ=function(currentQuestion,currentQuestionIndex){var e_1,_a,e_2,_b,e_3,_c,e_4,_d,e_5,_e,e_6,_f,display=!0;if("string"==typeof currentQuestion.visibleIf)return!1;try{for(var _g=__values(this.questions),_h=_g.next();!_h.done;_h=_g.next()){var question=_h.value;try{for(var _j=(e_2=void 0,__values(currentQuestion.visibleIf)),_k=_j.next();!_k.done;_k=_j.next()){var condition=_k.value;if(condition._id===question._id){var expression=[];if("==="!=condition.operator){if("multiselect"===question.responseType)try{for(var _l=(e_3=void 0,__values(question.value)),_m=_l.next();!_m.done;_m=_l.next()){var parentValue=_m.value;try{for(var _o=(e_4=void 0,__values(condition.value)),_p=_o.next();!_p.done;_p=_o.next()){var value=_p.value;expression.push("(","'"+parentValue+"'","===","'"+value+"'",")",condition.operator)}}catch(e){e_4={error:e}}finally{try{_p&&!_p.done&&(_d=_o.return)&&_d.call(_o)}finally{if(e_4)throw e_4.error}}}}catch(e){e_3={error:e}}finally{try{_m&&!_m.done&&(_c=_l.return)&&_c.call(_l)}finally{if(e_3)throw e_3.error}}else try{for(var _q=(e_5=void 0,__values(condition.value)),_r=_q.next();!_r.done;_r=_q.next()){var value=_r.value;expression.push("(","'"+question.value+"'","===","'"+value+"'",")",condition.operator)}}catch(e){e_5={error:e}}finally{try{_r&&!_r.done&&(_e=_q.return)&&_e.call(_q)}finally{if(e_5)throw e_5.error}}expression.pop()}else if("multiselect"===question.responseType){try{for(var _s=(e_6=void 0,__values(question.value)),_t=_s.next();!_t.done;_t=_s.next()){var value=_t.value;expression.push("(","'"+condition.value+"'","===","'"+value+"'",")","||")}}catch(e){e_6={error:e}}finally{try{_t&&!_t.done&&(_f=_s.return)&&_f.call(_s)}finally{if(e_6)throw e_6.error}}expression.pop()}else expression.push("(","'"+question.value+"'",condition.operator,"'"+condition.value+"'",")");if(!eval(expression.join("")))return this.questions[currentQuestionIndex].isCompleted=!0,!1}}}catch(e){e_2={error:e}}finally{try{_k&&!_k.done&&(_b=_j.return)&&_b.call(_j)}finally{if(e_2)throw e_2.error}}}}catch(e){e_1={error:e}}finally{try{_h&&!_h.done&&(_a=_g.return)&&_a.call(_g)}finally{if(e_1)throw e_1.error}}return display},InputComponent.ctorParameters=function(){return[{type:SlTranslateService},{type:SlQuestionnaireService}]},__decorate([core.Input()],InputComponent.prototype,"questions",void 0),__decorate([core.Input()],InputComponent.prototype,"questionnaireForm",void 0),InputComponent=__decorate([core.Component({selector:"sl-input",template:'<div *ngFor="let question of questions; let qi = index">\n  <div\n    [ngClass]="{\n      \'ui card question-card sb--card relative9\':\n        question.responseType != \'pageQuestions\'\n    }"\n    *ngIf="!question.visibleIf.length || question.canDisplay == true"\n  >\n    <div [ngClass]="{ content: question.responseType != \'pageQuestions\' }">\n      <div class="d-flex flex-ai-flex-start flex-jc-space-between">\n        <div\n          *ngFor="let q of question.question; let qai = index"\n          [ngClass]="{\n            \'mb-20\': q.length,\n            \'valid-response\': questionnaireForm?.controls[question._id]?.valid\n          }"\n        >\n          <div class="sb-h5">\n            {{ qai == 0 ? qi + 1 + ")" : "" }}&nbsp;{{ q }}\n          </div>\n        </div>\n        <div *ngIf="question?.hint">\n          <i\n            class="icon large lightbulb"\n            (click)="dimmerIndex = qi; isDimmed = !isDimmed"\n          ></i>\n        </div>\n      </div>\n      <div *ngIf="question?.tip" class="mb-10">\n        <small class="mb-10">{{ question?.tip }}</small>\n      </div>\n      <div class="sbt-page-content-questionnaireFormarea\'">\n        <sl-text-input\n          *ngIf="question.responseType == reponseType.TEXT"\n          [questionnaireForm]="questionnaireForm"\n          [question]="question"\n        ></sl-text-input>\n        <sl-date-input\n          *ngIf="question.responseType == reponseType.DATE"\n          [questionnaireForm]="questionnaireForm"\n          [question]="question"\n        ></sl-date-input>\n        <sl-number-input\n          *ngIf="question.responseType == reponseType.NUMBER"\n          [questionnaireForm]="questionnaireForm"\n          [question]="question"\n        ></sl-number-input>\n        <sl-range-input\n          *ngIf="question.responseType == reponseType.SLIDER"\n          [questionnaireForm]="questionnaireForm"\n          [question]="question"\n        ></sl-range-input>\n        <sl-radio-input\n          *ngIf="question.responseType == reponseType.RADIO"\n          [questionnaireForm]="questionnaireForm"\n          [question]="question"\n          [options]="question.options"\n          (dependentParent)="toggleQuestion($event)"\n        ></sl-radio-input>\n        <sl-checkbox-input\n          *ngIf="question.responseType == reponseType.MULTISELECT"\n          [questionnaireForm]="questionnaireForm"\n          [question]="question"\n          [options]="question.options"\n          (dependentParent)="toggleQuestion($event)"\n        ></sl-checkbox-input>\n        <sl-page-questions\n          *ngIf="\n            question.responseType == reponseType.PAGEQUESTIONS;\n            pageQuestions\n          "\n          [questionnaireForm]="questionnaireForm"\n          [question]="question"\n        ></sl-page-questions>\n        <sl-matrix-questions\n          *ngIf="question.responseType == reponseType.MATRIX"\n          [questionnaireForm]="questionnaireForm"\n          [question]="question"\n        ></sl-matrix-questions>\n        <sl-ques-remarks\n          [question]="question"\n          *ngIf="question.showRemarks"\n        ></sl-ques-remarks>\n        <sl-attachment\n          [data]="{\n            submissionId: qService.getSubmissionId(),\n            files: question.fileName\n          }"\n          *ngIf="question.file"\n        ></sl-attachment>\n        <sui-dimmer\n          [(isDimmed)]="isDimmed"\n          [isClickable]="true"\n          *ngIf="dimmerIndex == qi && question?.hint"\n        >\n          <div class="center">\n            <h4 class="ui inverted header">{{ question?.hint }}</h4>\n            <button\n              type="button"\n              class="sb-btn sb-btn-sm sb-btn-white text-uppercase flex-basis-1"\n              type="submit"\n            >\n              {{ dimmerCloseText }}\n            </button>\n          </div>\n        </sui-dimmer>\n      </div>\n    </div>\n  </div>\n</div>\n',styles:[".question-card{border-radius:28px;padding:20px;width:100%;margin-bottom:20px}.question-card:last-child{margin-bottom:20px}:host .question-card.sb--card,:host .sb-radio-btn-checkbox{width:100%;background-color:var(--sb-card-bg);color:var(--primary-color)}:host label{color:var(--body-color)}:host ::ng-deep .question-card .sb-checkbox label,:host ::ng-deep .question-card .sb-radio-btn-checkbox label{color:var(--body-color);font-weight:400}:host ::ng-deep .question-card input:focus,:host ::ng-deep .question-card input:focus~label{color:var(--body-color)}:host ::ng-deep .question-card #range{background-color:var(--sb-card-bg)}:host ::ng-deep .question-card .student-card{background-color:var(--sb-card-bg)}:host ::ng-deep .question-card .question-date-input,:host ::ng-deep .question-card input:active.question-date-input,:host ::ng-deep .question-card input:focus.question-date-input{background:var(--cc-sbcard-data1-bg);color:var(--sb-prominent-filter-title)}.remarks{margin-top:15px}.valid-response{color:var(--green)}"]})],InputComponent),InputComponent}(),PageQuestionsComponent=function(){function e(){}return e.prototype.ngOnInit=function(){},__decorate([core.Input()],e.prototype,"questionnaireForm",void 0),__decorate([core.Input()],e.prototype,"question",void 0),e=__decorate([core.Component({selector:"sl-page-questions",template:'<sl-input\n  [questions]="question.pageQuestions"\n  [questionnaireForm]="questionnaireForm"\n></sl-input>\n',styles:[""]})],e)}(),MatrixQuestionsComponent=function(){function e(e,t,n,o){this.translate=e,this.modalService=t,this.fb=n,this.utils=o}return e.prototype.ngOnInit=function(){var e=this;this.addText=this.translate.frmelmnts.btn.add,this.submitText=this.translate.frmelmnts.btn.submit,this.cancelText=this.translate.frmelmnts.btn.cancel,setTimeout((function(){e.matrixForm=e.fb.group({},forms.Validators.required),e.questionnaireForm.addControl(e.question._id,new forms.FormArray([],[forms.Validators.required])),e.initializeMatrix()}))},e.prototype.initializeMatrix=function(){var e=this,t=!0;this.question.value.length&&this.question.value.map((function(n){var o={};n.forEach((function(e){e.value&&(o[e._id]=e.value)})),e.questionnaireForm.controls[e.question._id].push(new forms.FormControl(o)),lodashEs.isEmpty(o)&&(t=!1)})),t||this.questionnaireForm.controls[this.question._id].setErrors({err:"Matrix reposne not valid"})},e.prototype.addInstances=function(){this.question.value=this.question.value?this.question.value:[],this.question.value.push(JSON.parse(JSON.stringify(this.question.instanceQuestions))),this.matrixForm.reset(),this.formAsArray.push(new forms.FormControl([],[forms.Validators.required]))},e.prototype.viewInstance=function(e){this.matrixForm.reset(),this.formAsArray.controls[e].value&&this.matrixForm.patchValue(this.formAsArray.controls[e].value);var t=new ng2SemanticUiV9.TemplateModalConfig(this.modalTemplate);t.closeResult="closed!",t.context={questions:this.question.value[e],heading:this.question.instanceIdentifier+" "+(e+1),index:e},this.context=t.context,this.showBadgeAssingModel=!0},Object.defineProperty(e.prototype,"formAsArray",{get:function(){return this.questionnaireForm.controls[this.question._id]},enumerable:!0,configurable:!0}),e.prototype.matrixSubmit=function(e){this.showBadgeAssingModel=!1,this.formAsArray.at(e).patchValue(this.matrixForm.value),this.matrixForm.invalid&&this.formAsArray.at(e).setErrors({err:"Matrix reposne not valid"})},e.prototype.deleteInstanceAlert=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){return t={title:this.translate.frmelmnts.alert.uploadTermsRejected,size:"mini",bodyType:"text",data:this.translate.frmelmnts.lbl.deleteSubmission,buttonClass:"double-btn",acceptText:this.translate.frmelmnts.btn.yes,cancelText:this.translate.frmelmnts.btn.no},this.utils.alert(t)?(this.question.value.splice(e,1),this.questionnaireForm.controls[this.question._id].removeAt(e),[2]):[2]}))}))},e.ctorParameters=function(){return[{type:SlTranslateService},{type:ng2SemanticUiV9.SuiModalService},{type:forms.FormBuilder},{type:SlUtilsService}]},__decorate([core.Input()],e.prototype,"questionnaireForm",void 0),__decorate([core.Input()],e.prototype,"question",void 0),__decorate([core.ViewChild("modalTemplate")],e.prototype,"modalTemplate",void 0),e=__decorate([core.Component({selector:"sl-matrix-questions",template:'<div class="d-flex flex-jc-flex-end">\n  <button class="sb-btn sb-btn-normal sb-btn-primary" (click)="addInstances()">\n    {{ addText }}\n    {{ question?.instanceIdentifier }}\n  </button>\n</div>\n<div\n  class="ui card student-card"\n  *ngFor="let instance of question?.value; let i = index"\n>\n  <div class="content flex-jc-space-between">\n    <div (click)="viewInstance(i)" style="flex: 1">\n      <span> {{ question?.instanceIdentifier }} {{ i + 1 }}</span>\n      \x3c!-- <span class="modified" *ngIf="getLastModified(instance)"\n      >Last Modified {{ "todo" }}</span\n    > --\x3e\n      \x3c!-- todo --\x3e\n    </div>\n    <div>\n      <i class="trash large icon" (click)="deleteInstanceAlert(i)"></i>\n    </div>\n  </div>\n</div>\n\n<sui-modal\n  [mustScroll]="true"\n  [isClosable]="true"\n  [transitionDuration]="0"\n  [size]="\'normal\'"\n  class="sb-modal"\n  appBodyScroll\n  (dismissed)="showBadgeAssingModel = false"\n  *ngIf="showBadgeAssingModel"\n  #modal\n>\n  \x3c!--Header--\x3e\n  <div class="sb-modal-header">\n    {{ context?.heading }}\n  </div>\n  \x3c!--/Header--\x3e\n  \x3c!--Content--\x3e\n  <div class="sb-modal-content">\n    <sl-input\n      [questions]="context.questions"\n      [questionnaireForm]="matrixForm"\n    ></sl-input>\n  </div>\n  \x3c!--/Content--\x3e\n\n  \x3c!--Actions--\x3e\n  <div class="sb-modal-actions">\n    <button\n      [disabled]="!matrixForm?.valid"\n      type="button"\n      (click)="matrixSubmit(context.index)"\n      [ngClass]="{\n        \'sb-btn sb-btn-normal\': true,\n        \'sb-btn-primary\': matrixForm?.valid,\n        \'sb-btn-disabled\': !matrixForm?.valid\n      }"\n    >\n      {{ submitText }}\n    </button>\n    <button\n      class="sb-btn sb-btn-normal sb-btn-outline-primary"\n      type="button"\n      (click)="showBadgeAssingModel = false"\n    >\n      {{ cancelText }}\n    </button>\n  </div>\n  \x3c!--/Actions--\x3e\n</sui-modal>\n',styles:[".card{width:100%;border-radius:90px}.content{display:flex;flex-direction:row}.ui.card>.content:after,.ui.cards>.card>.content:after{content:none}"]})],e)}(),SlQuestionnaireModule=function(){function e(){}return e=__decorate([core.NgModule({declarations:[TextInputComponent,DateInputComponent,NumberInputComponent,RangeInputComponent,RadioInputComponent,CheckboxInputComponent,QuesRemarksComponent,AttachmentComponent,InputComponent,PageQuestionsComponent,MatrixQuestionsComponent],imports:[common.CommonModule,forms.FormsModule,forms.ReactiveFormsModule,ng2SemanticUiV9.SuiModule],exports:[TextInputComponent,DateInputComponent,NumberInputComponent,RangeInputComponent,RadioInputComponent,CheckboxInputComponent,QuesRemarksComponent,AttachmentComponent,InputComponent,PageQuestionsComponent,MatrixQuestionsComponent]})],e)}();exports.AttachmentComponent=AttachmentComponent,exports.CheckboxInputComponent=CheckboxInputComponent,exports.DateInputComponent=DateInputComponent,exports.InputComponent=InputComponent,exports.MatrixQuestionsComponent=MatrixQuestionsComponent,exports.NumberInputComponent=NumberInputComponent,exports.PageQuestionsComponent=PageQuestionsComponent,exports.QuesRemarksComponent=QuesRemarksComponent,exports.RadioInputComponent=RadioInputComponent,exports.RangeInputComponent=RangeInputComponent,exports.SlQuestionnaireModule=SlQuestionnaireModule,exports.SlQuestionnaireService=SlQuestionnaireService,exports.SlTranslateService=SlTranslateService,exports.SlUtilsService=SlUtilsService,exports.TextInputComponent=TextInputComponent,Object.defineProperty(exports,"__esModule",{value:!0})}));
//# sourceMappingURL=sl-questionnaire.umd.min.js.map